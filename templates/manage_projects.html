{% extends 'base.html' %}

{% block title %}Projekte verwalten{% endblock %}

{% block content %}
  <h1>Projekte verwalten</h1>

  <form method="post" action="{{ url_for('manage_projects') }}">
    {{ form.hidden_tag() }}
      <div>{{ form.name.label        }}<br>{{ form.name(size=32)        }}<br><br></div>
      <div>{{ form.description.label }}<br>{{ form.description(size=64) }}<br><br></div>
      <div>{{ form.remarks.label     }}<br>{{ form.remarks(size=64)     }}<br><br></div>
      <div>{{ form.submit_redirect() }}    {{ form.submit_stay()        }}<br><br></div>
  </form>

  <h2>Existierende Projekte</h2>
  <ul>
    {% for project in projects %}
    <li>

      <!-- Bearbeiten -->
      <form method="get"
            action="{{ url_for('edit_project', project_id=project.id) }}"
            style="display:inline;">
        <button type="submit">Bearbeiten</button>
      </form>

      <!-- Löschen -->
      <form method="post"
            action="{{ url_for('manage_projects') }}"
            style="display:inline;">
        {{ form.csrf_token }}
        <input type="hidden" name="delete_project_id" value="{{ project.id }}">
        <button type="submit">Löschen</button>
      </form>

      {{ project.name }}{% if project.description %} ({{ project.description }}){% endif %}
                        {% if project.remarks %} [{{ project.remarks }}]{% endif %}

     </li>
    {% endfor %}
  </ul>
  {% endblock %}
