{% extends 'base.html' %}

{% block title %}Maschinen verwalten{% endblock %}

{% block content %}
  <h1>Maschinen verwalten</h1>

  <form method="post" action="{{ url_for('manage_machines') }}">
    {{ form.hidden_tag() }}
      <div>{{ form.name.label        }}<br>{{ form.name(size=32)        }}<br><br></div>
      <div>{{ form.description.label }}<br>{{ form.description(size=64) }}<br><br></div>
      <div>{{ form.remarks.label     }}<br>{{ form.remarks(size=64)     }}<br><br></div>
      <div>{{ form.submit_redirect() }}    {{ form.submit_stay()        }}<br><br></div>
  </form>

  <h2>Existierende Maschinen</h2>
  <ul>
    {% for machine in machines %}
    <li>

      <!-- Bearbeiten -->
      <form method="get"
            action="{{ url_for('edit_machine', machine_id=machine.id) }}"
            style="display:inline;">
        <button type="submit">Bearbeiten</button>
      </form>

      <!-- Löschen -->
      <form method="post"
            action="{{ url_for('manage_machines') }}"
            style="display:inline;">
        {{ form.csrf_token }}
        <input type="hidden" name="delete_machine_id" value="{{ machine.id }}">
        <button type="submit">Löschen</button>
      </form>

      {{ machine.name }}{% if machine.description %} ({{ machine.description }}){% endif %}
                        {% if machine.remarks %} [{{ machine.remarks }}]{% endif %}

    </li>
    {% endfor %}
  </ul>
  {% endblock %}
