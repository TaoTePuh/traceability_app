{% extends 'base.html' %}

{% block title %}Benutzer verwalten{% endblock %}

{% block content %}
  <h1>Benutzer verwalten</h1>

  <form method="post" action="{{ url_for('manage_users') }}">
    {{ form.hidden_tag() }}
      <div>{{ form.username.label    }}<br>{{ form.username(size=32)  }}<br><br></div>
      <div>{{ form.full_name.label   }}<br>{{ form.full_name(size=64) }}<br><br></div>
      <div>{{ form.remarks.label     }}<br>{{ form.remarks(size=64)   }}<br><br></div>
      <div>{{ form.submit_redirect() }}    {{ form.submit_stay()      }}<br><br></div>
  </form>

  <h2>Existierende Benutzer</h2>
  <ul>
    {% for user in users %}
    <li>

      <!-- Bearbeiten -->
      <form method="get"
            action="{{ url_for('edit_user', user_id=user.id) }}"
            style="display:inline;">
        <button type="submit">Bearbeiten</button>
      </form>

      <!-- Löschen -->
      <form method="post"
            action="{{ url_for('manage_users') }}"
            style="display:inline;">
        {{ form.csrf_token }}
        <input type="hidden" name="delete_user_id" value="{{ user.id }}">
        <button type="submit">Löschen</button>
      </form>

      {{ user.username }}{% if user.full_name %} ({{ user.full_name }}){% endif %}
                         {% if user.remarks %} [{{ user.remarks }}]{% endif %}

    </li>
    {% endfor %}
  </ul>
  {% endblock %}
