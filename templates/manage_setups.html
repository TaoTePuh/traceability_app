{% extends 'base.html' %}

{% block title %}Setups verwalten{% endblock %}

{% block content %}
  <h1>Setups verwalten</h1>

  <form method="POST" action="{{ url_for('manage_setups') }}">
    {{ form.hidden_tag() }}
    <p>
      {{ form.benutzer.label }}<br>
      {{ form.benutzer() }}
    </p>
    <p>
      {{ form.projekt.label }}<br>
      {{ form.projekt() }}
    </p>
    <p>
      {{ form.maschine.label }}<br>
      {{ form.maschine() }}
    </p>
    <p>
      {{ form.name.label }}<br>
      {{ form.name() }}
    </p>
    <p>
      {{ form.bemerkungen.label }}<br>
      {{ form.bemerkungen() }}
    </p>
    <p>
      {{ form.submit_redirect() }} {{ form.submit_stay() }}
    </p>
  </form>

  <h2>Existierende Setups</h2>
  <ul>
  {% for s in setups %}
    <li>

      <!-- Bearbeiten -->
      <form method="GET"
        action="{{ url_for('edit_setup', setup_id=s.id) }}"
        style="display:inline;">
        <button type="submit">Bearbeiten</button>
      </form>

      <!-- Löschen -->
      <form method="POST"
            action="{{ url_for('delete_setup', setup_id=s.id) }}"
            style="display:inline;">
        {{ form.csrf_token }}    {# wenn Du CSRF benutzt #}
        <button type="submit"
                onclick="return confirm('Setup wirklich löschen?');">
          Löschen
        </button>
      </form>

      {{ s.name }} ({{ s.benutzer.username }}, {{ s.projekt.name }}, {{ s.maschine.name }})

    </li>
  {% else %}
    <li>Keine Setups vorhanden.</li>
  {% endfor %}
  </ul>
{% endblock %}
