{% extends 'base.html' %}

{% block title %}Setup-Verwaltung{% endblock %}

{% block content %}
  <h1>Neues Setup anlegen</h1>

  <form method="POST" action="{{ url_for('manage_setups') }}">
    {{ form.hidden_tag() }}
    <p>
      {{ form.benutzer.label }} {{ form.benutzer() }}
    </p>
    <p>
      {{ form.projekt.label }} {{ form.projekt() }}
    </p>
    <p>
      {{ form.maschine.label }} {{ form.maschine() }}
    </p>
    <p>
      {{ form.name.label }} {{ form.name() }}
    </p>
    <p>
      {{ form.bemerkungen.label }} {{ form.bemerkungen() }}
    </p>
    <p>
      {{ form.submit_redirect() }} {{ form.submit_stay() }}
    </p>
  </form>

  <h2>Existierende Setups</h2>
  <ul>
  {% for s in setups %}
    <li>
      {{ s.setupname }} ({{ s.benutzer.username }}, {{ s.projekt.name }}, {{ s.maschine.name }})
      <!-- Kleines Formular nur für Delete -->
      <form method="POST"
            action="{{ url_for('delete_setup', id=s.id) }}"
            style="display:inline;">
        {{ form.csrf_token }}    {# wenn Du CSRF benutzt #}
        <button type="submit"
                onclick="return confirm('Setup wirklich löschen?');">
          Löschen
        </button>
      </form>
      <a href="{{ url_for('edit_setup', id=s.id) }}">Bearbeiten</a>
    </li>
  {% else %}
    <li>Keine Setups vorhanden.</li>
  {% endfor %}
  </ul>
{% endblock %}
