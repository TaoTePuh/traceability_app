{% extends 'base.html' %}

{% block title %}Setups verwalten{% endblock %}

{% block content %}
  <h1>Setups verwalten</h1>

  <form method="POST" action="{{ url_for('manage_setups') }}">
    {{ form.hidden_tag() }}
    <div>{{ form.benutzer.label    }}<br>{{ form.benutzer()    }}<br><br></div>
    <div>{{ form.projekt.label     }}<br>{{ form.projekt()     }}<br><br></div>
    <div>{{ form.maschine.label    }}<br>{{ form.maschine()    }}<br><br></div>
    <div>{{ form.name.label        }}<br>{{ form.name()        }}<br><br></div>
    <div>{{ form.status.label      }}<br>{{ form.status()      }}<br><br></div>
    <div>{{ form.bemerkungen.label }}<br>{{ form.bemerkungen() }}<br><br></div>
    <div>{{ form.submit_redirect() }}    {{ form.submit_stay() }}<br><br></div>
  </form>

  <h2>Existierende Setups</h2>
  <ul>
  {% for s in setups %}
    <li>

      <!-- Bearbeiten -->
      <form method="GET"
        action="{{ url_for('edit_setup', setup_id=s.id) }}"
        style="display:inline;">
        <button type="submit">Bearbeiten</button>
      </form>

      <!-- Löschen -->
      <form method="POST"
            action="{{ url_for('delete_setup', setup_id=s.id) }}"
            style="display:inline;">
        {{ form.csrf_token }}    {# wenn Du CSRF benutzt #}
        <button type="submit"
                onclick="return confirm('Setup wirklich löschen?');">
          Löschen
        </button>
      </form>

      {{ s.name }} ({{ s.status }}, {{ s.benutzer.username }}, {{ s.projekt.name }}, {{ s.maschine.name }}, {{ s.bemerkungen }})

    </li>
  {% else %}
    <li>Keine Setups vorhanden.</li>
  {% endfor %}
  </ul>
{% endblock %}
